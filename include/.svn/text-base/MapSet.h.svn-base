/*
 *  HashSet.h
 *  XQL
 *
 *  Created by Izaak Schroeder on 09-11-24.
 *  Copyright 2009 __MyCompanyName__. All rights reserved.
 *
 */

#ifndef _MAPSET_H_
#define _MAPSET_H_

#include "Foundation/include/Set.h"
#include "Foundation/include/Map.h"
#include "Foundation/include/EqualityComparator.h"

namespace I 
{
	template <template<typename, typename, template <typename> class> class MT, typename T, template<typename> class C = EqualityComparator> class MapSet : public Set<T,C>
	{
	public:
		unsigned int GetSize() const
		{
			return MapData.GetSize();
		};
		
		Iterator<T>* GetIterator() const
		{
			return MapData.GetIterator();
		};
		
		MapSet<MT, T, C>& operator = (const MapSet<MT, T, C>& Other)
		{
			MapData = Other.MapData;
			return *this;
		}
		
		MapSet<MT, T, C>& operator = (const Set<T, C>& Other)
		{
			Clear();
			foreach(T, i, Other)
				Add(*i);
			return *this;
		}
		
		bool Remove(const T& Item)
		{
			if (!Contains(Item))
				return false;
			MapData.Unset(Item);
			return false;
		}
		
		bool Add(const T& Item) 
		{
			return MapData.Set(Item, Item);
		};
		
		bool Contains(const T& Item) const
		{
			return MapData.ContainsKey(Item);
		};
		
		T& Get(const T& Item) const {
			return MapData.Get(Item);
		}
		
		virtual void Clear() 
		{
			MapData.Clear();
		}
		
		bool VerifyState() {
			return MapData.VerifyState();
		}
		
	private:
		MT<T,T,C> MapData;
	};
};

#endif